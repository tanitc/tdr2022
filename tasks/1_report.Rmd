---
title: "Document"
output: html_document
date: "2022-10-02"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
suppressPackageStartupMessages(library(tidyverse)) 
library(readxl) 
```

# Introducció

# Processament de dades

## Lectura de les dades

```{r}

if (1=2){
  
  dat<-read_excel("~/e/griu/Crea una carpeta/Dropbox/upf/DISSENY_EXPERIMENT.xlsx",sheet = 2, range = "C4:P32", col_names = TRUE)
  write.table(dat, file="../data/dades.txt", row.names=FALSE, dec=",", sep="\t")
}

td <- read.table("../data/dades.txt", header=TRUE, dec=",", sep="\t")
```

### Validació de la carrega

Es presenta la estructura de les dades.

```{r}
resum <- glimpse(td)

print(resum)
```

Com es pot veure les columnes contenen les diferents observacions d'una mateixa canya dins de una experiment.

Es mostren les primeres files.

```{r}
resum <- head(td)

print(resum)
```

A continuació s'observa quants tipus de canyes i cuantes files té cada tipus.

```{r}
resum <- aggregate(data.frame(N_FILES=rep(1:nrow(td)))
                   ,list(NOM=td$NOM, MEDI=td$MEDI, BOSSA=td$BOSSA, M=td$M, B=td$B)
                   ,sum)
resum <- aggregate(data.frame(N_FILES=rep(1, nrow(td)))
                   ,list(B=td$B, BOSSA=td$BOSSA)
                   ,sum)

print(resum)

```
Com es pot veure, hi ha 7 bosses (B) numerades del 1 a 7 on, en cada bossa tenim una canya diferent (6 en total) i a la setena bossa (anomenada canya de control) que és una bossa de control sense cap canya i serveix per mesurar les posibles variacions de pes de la bossa en el temps.

summary(td)

## Reestructuració de les dades

Es reestructura el format de dades transversals on les variables de temps estàn en diferents columnes, a un format de dades longitudinals on cada canya y medi tenen difernets files per cada setmana.

```{r}
p_td <- reshape(td, direction = "long"
                , idvar = "NOM", v.names = "PES"
                , varying = c("TI","T0","T1","T2","T3","T4")
                , timevar = "SETMANA")
```

# Transformació

# passem de c

```{r}
p_td$SETMANA <- p_td$SETMANA - 1
head(p_td,2)

```

